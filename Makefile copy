CLASS_PATH_NAME=/bin/app
JNI_DIR_NAME=jni
SRC_DIR_NAME=/src/app
SERVER_DIR=./Internet_Radio/
CLIENT_DIR=./Internet_Radio_Client/
JNI_DIR=$(SERVER_DIR)$(JNI_DIR_NAME)
SRC_DIR=$(SERVER_DIR)$(SRC_DIR_NAME)
CLASS_PATH=$(SERVER_DIR)$(CLASS_PATH_NAME)

#JAVAC=$(JAVA_HOME)/bin/javac


#JAVA_FILES=\
#$(SERVER_DIR)$(SRC_DIR_NAME)/App.java \
#$(SERVER_DIR)$(SRC_DIR_NAME)/JMPlayer.java \
#$(SERVER_DIR)$(SRC_DIR_NAME)/MPlayerCommands.java \
#$(SERVER_DIR)$(SRC_DIR_NAME)/ServerClientThread.java \
#$(SERVER_DIR)$(SRC_DIR_NAME)/ServerSocketManager.java \
#$(SERVER_DIR)$(SRC_DIR_NAME)/HardwareHandler.java \
#$(SERVER_DIR)$(SRC_DIR_NAME)/ButtonManager.java \
#$(SERVER_DIR)$(SRC_DIR_NAME)/DisplayManager.java
#
#C_FILES=\
#$(SERVER_DIR)$(JNI_DIR_NAME)/button.c \
#$(SERVER_DIR)$(JNI_DIR_NAME)/display.c
#
#C_H_FILES=\
#$(SERVER_DIR)$(JNI_DIR_NAME)/app_ButtonManager.h \
#$(SERVER_DIR)$(JNI_DIR_NAME)/app_DisplayManager.h




$(info C_FILES is $(C_FILES))

vpath %.class $(CLASS_PATH)

all : $(JNI_DIR)/libradio.so

header : $(JNI_DIR)/RadioControl.h

$(JNI_DIR)/libradio.so : $(JNI_DIR)/RadioControl.o
	gcc -W -shared -o $@ $<

$(JNI_DIR)/RadioControl.o : $(C_FILES) $(C_H_FILES)
	gcc -fPIC -I"$(JAVA_HOME)/include" -I"$(JAVA_HOME)/include/linux" -I"$(JNI_DIR)" -c $^ -o $@

%*.c : %*.o

$(JNI_DIR)/RadioControl.h :
	$(JAVAC) -h $(JNI_DIR) -d $(CLASS_PATH) $(JAVA_FILES)


clean :
	rm -Rf $(JNI_DIR)/*.h $(JNI_DIR)/*.o $(JNI_DIR)/*.so $(CLASS_PATH)/*